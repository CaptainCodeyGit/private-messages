{"version":3,"sources":["webpack://@captaincodey/private-messages/webpack/bootstrap","webpack://@captaincodey/private-messages/./forum.js","webpack://@captaincodey/private-messages/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@captaincodey/private-messages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@captaincodey/private-messages/./src/common/models/Conversation.js","webpack://@captaincodey/private-messages/./src/common/models/Message.js","webpack://@captaincodey/private-messages/./src/forum/components/MessageListItem.js","webpack://@captaincodey/private-messages/./src/forum/components/MessagesComposer.js","webpack://@captaincodey/private-messages/./src/forum/components/MessagesDropdown.js","webpack://@captaincodey/private-messages/./src/forum/components/MessagesReplyComposer.js","webpack://@captaincodey/private-messages/./src/forum/components/MessagesSidebar.js","webpack://@captaincodey/private-messages/./src/forum/components/MessagesStream.js","webpack://@captaincodey/private-messages/./src/forum/components/RecipientSearch.js","webpack://@captaincodey/private-messages/./src/forum/components/sources/UserSearchSource.js","webpack://@captaincodey/private-messages/./src/forum/index.js","webpack://@captaincodey/private-messages/./src/forum/messageAction.js","webpack://@captaincodey/private-messages/./src/forum/pages/ConversationArchivePage.js","webpack://@captaincodey/private-messages/./src/forum/pages/ConversationListPage.js","webpack://@captaincodey/private-messages/./src/forum/pages/ConversationSentPage.js","webpack://@captaincodey/private-messages/./src/forum/pages/ConversationTrashPage.js","webpack://@captaincodey/private-messages/./src/forum/pages/ConversationViewPage.js","webpack://@captaincodey/private-messages/external \"flarum.core.compat['Component']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['Model']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['app']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/CommentPost']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/ComposerBody']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/HeaderSecondary']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/NotificationsDropdown']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/Page']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/PostUser']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/Search']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['components/UserCard']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['extend']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['helpers/avatar']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['helpers/highlight']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['helpers/username']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['models/Model']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['models/User']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['utils/ItemList']\"","webpack://@captaincodey/private-messages/external \"flarum.core.compat['utils/mixin']\""],"names":["Conversation","apiEndpoint","mixin","Model","id","attribute","title","messagesCount","messages","hasMany","Message","content","user","hasOne","createdAt","isHidden","MessageListItem","init","conversation","props","page","view","actions","actionItems","toArray","app","route","map","action","type","onMouseClick","bind","icon","label","items","ItemList","add","actionType","element","remove","save","Component","MessagesComposer","m","prop","participent","recipientSearch","RecipientSearch","component","recipientsList","selectedRecipient","initProps","placeholder","submitLabel","className","confirmExit","session","onkeydown","e","which","preventDefault","editor","setSelectionRange","redraw","strategy","preventExit","headerItems","withAttr","disabled","data","reciepent","onsubmit","store","createRecord","then","composer","hide","ComposerBody","MessagesDropdown","onclick","goToRoute","getUnreadCount","getNewCount","NotificationsDropdown","MessagesReplyComposer","conversation_id","relationships","unshift","MessagesSidebar","openComposer","load","show","MessagesStream","message","PostUser","post","render","humanTime","config","isInitialized","self","searchResult","document","getElementsByClassName","addEventListener","target","addRecipient","dataset","index","parentNode","value","sources","sourceItems","loading","length","recipient","username","removeRecipient","loadingSources","source","UserSearchSource","clear","values","split","findRecipient","getById","Search","search","query","params","filter","q","limit","find","toLowerCase","results","all","substr","name","children","highlight","avatar","initializers","models","extendRoutes","path","ConversationListPage","ConversationSentPage","ConversationArchivePage","ConversationTrashPage","ConversationViewPage","routes","extend","HeaderSecondary","prototype","messageAction","UserCard","CommentPost","loadResults","conversations","cache","Page","loadConversation","replyComposer","showConversation","push","paramId","param"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\nexport * from './src/common';\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Conversation extends mixin(Model, {\n  id: Model.attribute('id'),\n  title: Model.attribute('title'),\n  messagesCount: Model.attribute('messages_count'),\n  messages: Model.hasMany('messages'),\n}) {\n  apiEndpoint() {\n    return '/captainc/pm/conversations';\n  }\n}","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Message extends mixin(Model, {\n  id: Model.attribute('id'),\n  content: Model.attribute('content'),\n  user: Model.hasOne('user'),\n  createdAt: Model.attribute('created_at'),\n  isHidden: Model.attribute('isHidden'),\n}) {\n  apiEndpoint() {\n    return '/captainc/pm/messages';\n  }\n}","import Component from 'flarum/Component';\nimport ItemList from 'flarum/utils/ItemList';\n\nexport default class MessageListItem extends Component {\n    init() {\n        this.conversation = this.props.conversation;\n        this.page = this.props.page;\n    }\n\n    view() {\n        const actions = this.actionItems().toArray();\n\n        return (\n            <div class=\"DiscussionListItem\">\n                <div class=\"DiscussionListItem-content Slidable-content\">\n                    <div class=\"DiscussionListItem-read MessagesListItem-read\">\n                        <i class=\"fas fa-envelope-open-text\"></i>\n                    </div>\n\n                    <a href={app.route('messages.view', { id: this.conversation.id() })} class=\"DiscussionListItem-main\">\n                        <h3 class=\"DiscussionListItem-title\">{this.conversation.title()}</h3>\n                        <ul class=\"DiscussionListItem-info\">\n                            <li class=\"item-terminalPost\">\n                                <i class=\"icon fas fa-reply\"></i>&nbsp;\n                                <span class=\"username\">Shahiem</span> replied&nbsp;\n                                <time>17 days ago</time>\n                            </li>\n                        </ul>\n                    </a>\n                    <span class=\"DiscussionListItem-count\">{this.conversation.messagesCount()}</span>\n                </div>\n\n                <div class=\"ButtonGroup Dropdown dropdown DiscussionListItem-controls itemCount1\">\n                    <button class=\"Dropdown-toggle Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right\" data-toggle=\"dropdown\" aria-expanded=\"true\">\n                        <i class=\"icon fas fa-ellipsis-v Button-icon\"></i><span class=\"Button-label\"></span>\n                        <i class=\"icon fas fa-caret-down Button-caret\"></i>\n                    </button>\n\n                    <ul class=\"Dropdown-menu dropdown-menu Dropdown-menu--bottom\">\n                        {actions.map(action => (\n                            <li class={'item-' + action.type} onclick={this.onMouseClick.bind(this, action.type)}>\n                                <button class=\"hasIcon\" type=\"button\">\n                                    <i class={'icon fas fa-' + action.icon + ' Button-icon'}></i>\n                                    <span class=\"Button-label\">{action.label}{''}</span>\n                                </button>\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    actionItems() {\n        const items = new ItemList();\n\n        if (this.page && this.page != 'trash') {\n            items.add('trash', {\n                icon: 'trash',\n                type: 'delete',\n                label: 'Delete',\n            }, 1);\n        }\n\n        if (this.page && this.page != 'archive' && this.page != 'trash') {\n            items.add('archive', {\n                icon: 'archive',\n                type: 'archive',\n                label: 'Archive',\n            }, 2);\n        }\n\n        return items;\n    }\n\n    onMouseClick(actionType) {\n        // Todo animation\n        if (this.conversation) {\n            this.element.remove();\n            this.conversation.save({ action: actionType });\n        }\n    }\n}","import ComposerBody from 'flarum/components/ComposerBody';\nimport ItemList from 'flarum/utils/ItemList';\nimport UserSearchSource from './sources/UserSearchSource';\nimport RecipientSearch from './RecipientSearch';\n\nexport default class MessagesComposer extends ComposerBody {\n    init() {\n        super.init();\n\n        this.title = m.prop('');\n        this.participent = m.prop('');\n\n        this.recipientSearch = RecipientSearch.component({\n            recipientsList: m.prop(new ItemList),\n            selectedRecipient: this.props.selectedRecipient\n        });\n    }\n\n    static initProps(props) {\n        super.initProps(props);\n\n        props.placeholder = 'Message';\n        props.submitLabel = 'Send';\n        props.className = 'ComposerBody--messages';\n        props.confirmExit = props.confirmExit || 'You have not sended your message. Do you wish to discard it?';\n        props.user = app.session.user;\n    }\n\n    onkeydown(e) {\n        if (e.which === 13) { // Return\n            e.preventDefault();\n            this.editor.setSelectionRange(0, 0);\n        }\n\n        m.redraw.strategy('none');\n    }\n\n    preventExit() {\n        return (this.title() || this.content()) && this.props.confirmExit;\n    }\n\n    headerItems() {\n        const items = super.headerItems();\n\n        items.add('participentId', this.recipientSearch);\n        items.add('messageTitle', (\n            <h3>\n                <input className=\"FormControl\"\n                    value={this.title()}\n                    oninput={m.withAttr('value', this.title)}\n                    placeholder=\"Title\"\n                    disabled={!!this.props.disabled}\n                />\n            </h3>\n        ));\n\n        return items;\n    }\n\n    data() {\n        let reciepent = null;\n\n        this.recipientSearch.props.recipientsList().toArray().map(user => {\n            reciepent = user.id();\n        })\n\n        return {\n            title: this.title(),\n            content: this.content(),\n            reciepent: reciepent,\n        };\n    }\n\n    onsubmit() {\n        const data = this.data();\n\n        app.store.createRecord('captainc-pm-conversation').save(data).then(\n            conversation => {\n                app.composer.hide();\n                m.route(app.route('messages.view', { id: conversation.id() }))\n            }\n        );\n    }\n}","import NotificationsDropdown from 'flarum/components/NotificationsDropdown';\n\nexport default class MessagesDropdown extends NotificationsDropdown {\n    static initProps(props) {\n        props.label = 'Private Messages';\n        props.icon = 'fas fa-envelope';\n\n        super.initProps(props);\n    }\n\n    init() {\n        super.init();\n    }\n\n    onclick() {\n        this.goToRoute();\n    }\n\n    goToRoute() {\n        m.route(app.route('messages.index'));\n    }\n\n    getUnreadCount() {\n        // console.log(app.session.user.unreadMessages())\n        // return app.session.unreadMessages;\n    }\n\n    getNewCount() {\n        // return app.session.unreadMessages;\n    }\n}\n","import ComposerBody from 'flarum/components/ComposerBody';\n\nexport default class MessagesReplyComposer extends ComposerBody {\n    init() {\n        super.init();\n    }\n\n    static initProps(props) {\n        super.initProps(props);\n\n        props.placeholder = 'Message';\n        props.submitLabel = 'Send';\n        props.className = 'ComposerBody--messages';\n        props.confirmExit = props.confirmExit || 'You have not sended your message. Do you wish to discard it?';\n        props.user = app.session.user;\n    }\n\n    onkeydown(e) {\n        if (e.which === 13) { // Return\n            e.preventDefault();\n            this.editor.setSelectionRange(0, 0);\n        }\n\n        m.redraw.strategy('none');\n    }\n\n    preventExit() {\n        return this.content() && this.props.confirmExit;\n    }\n\n    onsubmit() {\n        app.store.createRecord('captainc-pm-message').save({\n            conversation_id: this.props.id,\n            content: this.content(),\n            relationships: {\n                user: app.session.user\n            },\n        }).then(\n            conversation => {\n                app.composer.hide();\n\n                this.props.messages.unshift(conversation);\n                m.redraw();\n            }\n        );\n    }\n}","import Component from 'flarum/Component';\nimport MessagesComposer from './MessagesComposer';\n\nexport default class MessagesSidebar extends Component {\n    init() {\n    }\n\n    openComposer() {\n        const component = new MessagesComposer();\n\n        app.composer.load(component);\n        app.composer.show();\n    }\n\n    view() {\n        return (\n            <div>\n                <button onclick={this.openComposer.bind(this)} class=\"Button Button--primary MessagesPage-button\">\n                    <i class=\"icon fas fa-paper-plane Button-icon\"></i>\n                    <span class=\"Button-label\">New Conversation</span>\n                </button>\n\n                <ul>\n                    <li><a href={app.route('messages.index')}><i class=\"icon fas fa-inbox Button-icon\"></i> Inbox</a></li>\n                    <li><a href={app.route('messages.sent')}><i class=\"icon fas  fa-paper-plane Button-icon\"></i> Sent</a></li>\n                    {/* <li><a href={app.route('messages.pinned')}><i class=\"icon fas fa-thumbtack Button-icon\"></i> Pins</a></li> */}\n                    <li><a href={app.route('messages.archieved')}><i class=\"icon fas fa-archive Button-icon\"></i> Archive</a></li>\n                    <li><a href={app.route('messages.trash')}><i class=\"icon fas fa-trash Button-icon\"></i> Trash</a></li>\n                </ul>\n            </div>\n        );\n    }\n}","import Component from 'flarum/Component';\nimport PostUser from 'flarum/components/PostUser';\nimport humanTime from 'flarum/helpers/humanTime';\n\nexport default class MessagesStream extends Component {\n    init() {\n        super.init();\n    }\n\n    view() {\n        const message = this.props.message;\n        const user = new PostUser({ post: this.props.message });\n\n        return (\n            <article class=\"Post CommentPost\">\n                <div>\n                    <header class=\"Post-header\">\n                        <ul>\n                            <li class=\"item-user\">\n                                {(user.render())}\n                            </li>\n                            <li class=\"item-meta\">{humanTime(message.createdAt())}</li>\n                        </ul>\n                    </header>\n                    <div class=\"Post-body\">{message.content()}</div>\n                </div>\n            </article>\n        )\n    }\n}","import Search from 'flarum/components/Search';\nimport ItemList from 'flarum/utils/ItemList';\nimport UserSearchSource from './sources/UserSearchSource';\n\nexport default class RecipientSearch extends Search {\n\n    config(isInitialized) {\n        if (isInitialized)\n            return;\n\n        const self = this;\n        const searchResult = document.getElementsByClassName('Search-results')[1];\n\n        // Events\n\n        if (searchResult) {\n            searchResult.addEventListener('click', function () {\n                const target = searchResult.getElementsByClassName('SearchResult active')[0];\n\n                self.addRecipient(target.dataset.index);\n            });\n\n            searchResult.addEventListener('touchstart', function (e) {\n                const target = e.target.parentNode;\n\n                self.addRecipient(target.dataset.index);\n            });\n        }\n\n        this.selectedRecipient = this.props.selectedRecipient;\n        this.recipientsList = this.props.recipientsList;\n\n        // Select a recipient\n        if (this.selectedRecipient)\n            self.addRecipient('users:' + this.selectedRecipient);\n\n        super.config(isInitialized);\n    }\n\n    view() {\n        if (typeof this.value() === 'undefined')\n            this.value('');\n\n        if (!this.sources)\n            this.sources = this.sourceItems().toArray();\n\n        const loading = this.value() && this.value().length >= 3;\n\n        return (\n            <h3>\n                {typeof this.recipientsList == 'function' ? (\n                    <div>\n                        {this.recipientsList().toArray().map(recipient =>\n                            <div class=\"MessageComposer-reciepent\">\n                                {recipient.username()}\n                                <i onclick={this.removeRecipient.bind(this, recipient)} class=\"fas fa-user-times MessageComposer-reciepentRemove\"></i>\n                            </div>\n                        )}\n\n                    </div>\n                ) : ''}\n\n                {!this.selectedRecipient ?\n                    (<div>\n                        <input class=\"FormControl\" placeholder=\"Reciepents\" value={this.value()} oninput={m.withAttr('value', this.value)} />\n                        <div class={'Search' + (loading ? ' open' : '')}>\n                            <div class=\"Dropdown-menu Search-results Search-results--messages fade in\">\n                                {this.value() ? (this.loadingSources ? 'loading' : this.sources.map(source => source.view(this.value()))) : ''}\n                            </div>\n                        </div>\n                    </div>) : (<div></div>)}\n            </h3>\n        );\n    }\n\n    sourceItems() {\n        const items = new ItemList();\n\n        items.add('users', new UserSearchSource());\n\n        return items;\n    }\n\n    clear() {\n        this.value('');\n\n        m.redraw();\n    }\n\n    addRecipient(value) {\n        let values = value.split(':'),\n            type = values[0],\n            id = values[1];\n\n        let recipient = this.findRecipient(type, id);\n\n        this.recipientsList().add(value, recipient);\n        this.clear();\n    }\n\n    removeRecipient(recipient) {\n        this.recipientsList().remove('users' + \":\" + recipient.id());\n\n        m.redraw();\n    }\n\n    findRecipient(store, id) {\n        return app.store.getById(store, id);\n    }\n}","import highlight from 'flarum/helpers/highlight';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\n\nexport default class UserSearchSource {\n    search(query) {\n        const params = {\n            filter: { q: query },\n            page: { limit: 3 },\n        };\n\n        return app.store.find('users', params);\n    }\n\n    view(query) {\n        query = query.toLowerCase();\n\n        const results = app.store.all('users')\n            .filter(user => user.username().toLowerCase().substr(0, query.length) === query);\n\n        if (!results.length) return '';\n\n        return [\n            results.map(user => {\n                const name = username(user);\n                name.children[0] = highlight(name.children[0], query);\n\n                return (\n                    <li className='SearchResult' data-index={'users:' + user.id()}>\n                        <a data-index={'users:' + user.id()}>\n                            {avatar(user)}\n                            {name}\n                        </a>\n                    </li>\n                );\n            })\n        ];\n    }\n}","import { extend } from 'flarum/extend';\nimport HeaderSecondary from 'flarum/components/HeaderSecondary';\nimport MessagesDropdown from './components/MessagesDropdown';\nimport Conversation from '../common/models/Conversation';\nimport Message from '../common/models/Message';\nimport ConversationListPage from './pages/ConversationListPage';\nimport ConversationSentPage from './pages/ConversationSentPage';\nimport ConversationTrashPage from './pages/ConversationTrashPage';\nimport ConversationArchivePage from './pages/ConversationArchivePage';\nimport ConversationViewPage from './pages/ConversationViewPage';\nimport messageAction from './messageAction';\n\nimport User from 'flarum/models/User';\nimport Model from 'flarum/models/Model';\n\n\napp.initializers.add('captaincodey-private-messages', app => {\n    // Relationships\n    app.store.models['captainc-pm-conversation'] = Conversation;\n    app.store.models['captainc-pm-message'] = Message;\n\n    // User.prototype.unreadMessages = Model.attribute('username');\n\n    // Routes\n    const extendRoutes = {\n        'messages.index': { path: '/messages', component: ConversationListPage.component() },\n        'messages.sent': { path: '/messages/sent', component: ConversationSentPage.component() },\n        'messages.pinned': { path: '/messages/pinned', component: ConversationSentPage.component() },\n        'messages.archieved': { path: '/messages/archieved', component: ConversationArchivePage.component() },\n        'messages.trash': { path: '/messages/trash', component: ConversationTrashPage.component() },\n        'messages.view': { path: '/m/:id', component: ConversationViewPage.component() },\n    }\n\n    Object.assign(app.routes, extendRoutes);\n\n    // Actions\n    extend(HeaderSecondary.prototype, 'items', function (items) {\n        if (app.session.user)\n            items.add('messages', <MessagesDropdown />, 15);\n    });\n\n    messageAction();\n}, -50);\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport CommentPost from 'flarum/components/CommentPost';\nimport UserCard from 'flarum/components/UserCard';\nimport MessagesComposer from './components/MessagesComposer';\n\nexport default () => {\n    // User card\n    extend(UserCard.prototype, 'infoItems', function (items) {\n        const user = this.props.user;\n        const openComposer = (user) => {\n            const component = new MessagesComposer({\n                selectedRecipient: user.id()\n            });\n\n            app.composer.load(component);\n            app.composer.show();\n        }\n\n        if (!app.session.user) return;\n\n        items.add(\n            'post-messages',\n            (<i class=\"fas fa-envelope\" onclick={openComposer.bind(null, user)}></i>),\n            -1\n        );\n    });\n\n    // Comment post\n    extend(CommentPost.prototype, 'actionItems', function (items) {\n        const post = this.props.post;\n        \n        const openComposer = (post) => {\n            const component = new MessagesComposer({\n                selectedRecipient: post.user().id()\n            });\n\n            app.composer.load(component);\n            app.composer.show();\n        }\n\n        if (post.isHidden() || !app.session.user) return;\n\n        items.add(\n            'post-messages',\n            (<i class=\"fas fa-envelope\" onclick={openComposer.bind(null, post)}></i>),\n            1\n        );\n    });\n\n};\n","import Page from 'flarum/components/Page';\nimport MessagesSidebar from '../components/MessagesSidebar';\nimport MessageListItem from '../components/MessageListItem';\n\nexport default class ConversationArchivePage extends Page {\n    init() {\n        super.init();\n\n        this.loadResults();\n    }\n\n    view() {\n        const conversations = app.cache.conversations || [];\n\n        return (\n            <div className=\"MessagesPage\">\n                <header class=\"Hero MessagesHero MessagesHero--colored\">\n                    <div class=\"container\">\n                        <div class=\"containerNarrow\">\n                            <h2 class=\"Hero-title\">Archive</h2>\n                        </div>\n                    </div>\n                </header>\n\n                <div class=\"container\">\n                    <div class=\"sideNavContainer\">\n                        <nav class=\"MessagesPage-nav sideNav\">\n                            {MessagesSidebar.component()}\n                        </nav>\n                        <div class=\"MessagesPage-results sideNavOffset\">\n                            {conversations.length ? conversations.map(conversation => MessageListItem.component({ conversation: conversation, page: 'archive' })) : !this.loading ? (\n                                <div class=\"MessagesPage-error\">\n                                    <div class=\"MessagesPage-empty\">\n                                        <img width=\"100\" src=\"https://image.flaticon.com/icons/svg/189/189058.svg\" />\n                                        <span class=\"MessagesPage-emptyTitle\">Oh snap!</span> Your inbox is empty.\n                                    </div>\n                                </div>\n                            ) : (<div>Loading...</div>)\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    loadResults() {\n        this.loading = true;\n\n        return app.store.find('/captainc/pm/conversations', { type: 'archieved' })\n            .then(\n                results => {\n                    app.cache.conversations = results;\n                    m.redraw();\n                }\n            )\n            .then(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n}","import Page from 'flarum/components/Page';\n\nimport MessagesSidebar from '../components/MessagesSidebar';\nimport MessageListItem from '../components/MessageListItem';\n\nexport default class ConversationListPage extends Page {\n    init() {\n        super.init();\n\n        this.loadResults();\n    }\n\n    view() {\n        const conversations = app.cache.conversations || [];\n\n        return (\n            <div className=\"MessagesPage\">\n                <header class=\"Hero MessagesHero MessagesHero--colored\">\n                    <div class=\"container\">\n                        <div class=\"containerNarrow\">\n                            <h2 class=\"Hero-title\">Inbox</h2>\n                        </div>\n                    </div>\n                </header>\n                <div class=\"container\">\n                    <div class=\"sideNavContainer\">\n                        <nav class=\"MessagesPage-nav sideNav\">\n                            {MessagesSidebar.component()}\n                        </nav>\n                        <div class=\"MessagesPage-results sideNavOffset\">\n                            {conversations.length ? conversations.map(conversation => MessageListItem.component({ conversation: conversation, page: 'inbox' })) : !this.loading ? (\n                                <div class=\"MessagesPage-error\">\n                                    <div class=\"MessagesPage-empty\">\n                                        <img width=\"100\" src=\"https://image.flaticon.com/icons/svg/189/189058.svg\" />\n                                        <span class=\"MessagesPage-emptyTitle\">Oh snap!</span> Your inbox is empty.\n                                    </div>\n                                </div>\n                            ) : (<div>Loading...</div>)\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    loadResults() {\n        this.loading = true;\n\n        return app.store.find('captainc/pm/conversations')\n            .then(results => {\n                app.cache.conversations = results;\n                m.redraw();\n            })\n            .then(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n}","import Page from 'flarum/components/Page';\nimport MessagesSidebar from '../components/MessagesSidebar';\nimport MessageListItem from '../components/MessageListItem';\n\nexport default class ConversationSentPage extends Page {\n    init() {\n        super.init();\n\n        this.loadResults();\n    }\n\n    view() {\n        const conversations = app.cache.conversations || [];\n\n        return (\n            <div className=\"MessagesPage\">\n                <header class=\"Hero MessagesHero MessagesHero--colored\">\n                    <div class=\"container\">\n                        <div class=\"containerNarrow\">\n                            <h2 class=\"Hero-title\">Sent</h2>\n                        </div>\n                    </div>\n                </header>\n\n                <div class=\"container\">\n                    <div class=\"sideNavContainer\">\n                        <nav class=\"MessagesPage-nav sideNav\">\n                            {MessagesSidebar.component()}\n                        </nav>\n                        <div class=\"MessagesPage-results sideNavOffset\">\n                            {conversations.length ? conversations.map(conversation => MessageListItem.component({ conversation: conversation, page: 'sent' })) : !this.loading ? (\n                                <div class=\"MessagesPage-error\">\n                                    <div class=\"MessagesPage-empty\">\n                                        <img width=\"100\" src=\"https://image.flaticon.com/icons/svg/189/189058.svg\" />\n                                        <span class=\"MessagesPage-emptyTitle\">Oh snap!</span> Your inbox is empty.\n                                        </div>\n                                </div>\n                            ) : (<div>Loading...</div>)\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    loadResults() {\n        this.loading = true;\n\n        return app.store.find('/captainc/pm/conversations', { type: 'sent' })\n            .then(\n                results => {\n                    app.cache.conversations = results;\n                    m.redraw();\n                }\n            )\n            .then(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n}","import Page from 'flarum/components/Page';\nimport MessagesSidebar from '../components/MessagesSidebar';\nimport MessageListItem from '../components/MessageListItem';\n\nexport default class ConversationTrashPage extends Page {\n    init() {\n        super.init();\n\n        this.loadResults();\n    }\n\n    view() {\n        const conversations = app.cache.conversations || [];\n\n        return (\n            <div className=\"MessagesPage\">\n                <header class=\"Hero MessagesHero MessagesHero--colored\">\n                    <div class=\"container\">\n                        <div class=\"containerNarrow\">\n                            <h2 class=\"Hero-title\">Trash</h2>\n                        </div>\n                    </div>\n                </header>\n                \n                <div class=\"container\">\n                    <div class=\"sideNavContainer\">\n                        <nav class=\"MessagesPage-nav sideNav\">\n                            {MessagesSidebar.component()}\n                        </nav>\n                        <div class=\"MessagesPage-results sideNavOffset\">\n                            {conversations.length ? conversations.map(conversation => MessageListItem.component({ conversation: conversation, page: 'trash' })) : !this.loading ? (\n                                <div class=\"MessagesPage-error\">\n                                    <div class=\"MessagesPage-empty\">\n                                        <img width=\"100\" src=\"https://image.flaticon.com/icons/svg/189/189058.svg\" />\n                                        <span class=\"MessagesPage-emptyTitle\">Oh snap!</span> Your inbox is empty.\n                                        </div>\n                                </div>\n                            ) : (<div>Loading...</div>)\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    loadResults() {\n        this.loading = true;\n\n        return app.store.find('/captainc/pm/conversations', { type: 'deleted' })\n            .then(\n                results => {\n                    app.cache.conversations = results;\n                    m.redraw();\n                }\n            )\n            .then(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n}","import Page from 'flarum/components/Page';\nimport MessagesStream from '../components/MessagesStream';\nimport MessagesSidebar from '../components/MessagesSidebar';\nimport MessagesReplyComposer from '../components/MessagesReplyComposer';\n\nexport default class ConversationViewPage extends Page {\n    init() {\n        super.init();\n\n        this.conversation = null;\n        this.messages = [];\n\n        this.loadConversation();\n    }\n\n    view() {\n        return (\n            <div className=\"MessagesPage\">\n                <header class=\"Hero DiscussionHero DiscussionHero--colored\">\n                    <div class=\"container\">\n                        <ul class=\"DiscussionHero-items\">\n                            <li class=\"item-title\">\n                                {/* <h2 class=\"DiscussionHero-title\">{this.conversation ? this.conversation.title() : ''}</h2> */}\n                            </li>\n                            <li class=\"item-autor\">\n                                <h4>There are 2 people in this conversation</h4>\n                                <img class=\"Avatar\" src=\"http://localhost:8888/project/gargoyle/assets/avatars/bGjGozcj6EqQWNDk.png\" />\n                                <img class=\"Avatar\" src=\"http://localhost:8888/project/gargoyle/assets/avatars/uJK3jUK595EIN3bB.png\" />\n                            </li>\n                        </ul>\n                    </div>\n                </header>\n                <div class=\"container\">\n                    <div class=\"sideNavContainer\">\n                        <nav class=\"MessagesPage-nav sideNav\">\n                            {MessagesSidebar.component()}\n                        </nav>\n                        <div class=\"IndexPage-results sideNavOffset\">\n\n                            <div class=\"PostStream\">\n                                {this.messages.map(message => (\n                                    <div>\n                                        {MessagesStream.component({ 'message': message })}\n                                    </div>\n                                ))}\n                                <div class=\"PostStream-item\">\n                                    <article class=\"Post ReplyPlaceholder\" onclick={this.replyComposer.bind(this)}>\n                                        <header class=\"Post-header\">\n                                            <img class=\"Avatar PostUser-avatar\" src=\"http://localhost:8888/project/gargoyle/assets/avatars/bGjGozcj6EqQWNDk.png\" /> Write a Reply...\n                                        </header>\n                                    </article>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    replyComposer() {\n        const component = new MessagesReplyComposer({ id: this.conversation.id(), messages: this.messages });\n        app.composer.load(component);\n        app.composer.show();\n    }\n\n    showConversation(conversation) {\n        this.conversation = conversation;\n\n        this.conversation.messages().map(message => {\n            this.messages.push(message);\n        });\n\n        m.redraw();\n    }\n\n    loadConversation() {\n        const paramId = m.route.param('id');\n        return app.store.find('captainc/pm/conversations', paramId).then(this.showConversation.bind(this));\n    }\n\n}","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/ComposerBody'];","module.exports = flarum.core.compat['components/HeaderSecondary'];","module.exports = flarum.core.compat['components/NotificationsDropdown'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/PostUser'];","module.exports = flarum.core.compat['components/Search'];","module.exports = flarum.core.compat['components/UserCard'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Model'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}